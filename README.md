# 0xdeadbeef

[[🇺🇸English](./README_en.md)] [[🇨🇳中文](./README.md)] 

## 0. 👋 嗨！你好。

我们的项目专注于探索区块链` MEV`（矿工可提取价值）领域。我们开发了两个解决方案，分别应对这个领域中的两个著名的问题：网络信息延迟以及恶意 `erc20` 代币。

具体而言，这场黑客松活动中，我们开发了两个程序来展示我们的解决思路。

- [x] 💨 Pioplat: 一个基于 `geth` 客户端的程序，可以看作是`geth`变体，我们实现了降低网络延迟的算法，或者是节点选择策略。另外，我们还设计了 `relay` 机制以进一步降低延迟，这些`relay`节点单纯的转发消息，成本低廉，具备很好的可扩展性。
- [x] 🔰 TFSniffer: 一种基于符号执行的恶意代币检查器。这里我们设计了几个固定模式来检查 `transfer` 函数中是否存在恶意操作，例如黑名单和白名单，或转账手续费。得益于强大的符号执行技术，我们可以遍历几乎所有的可执行路径，包括多个函数不同先后次序的路径。
- [x] 🔍 MEV Scan: 通过Trace信息来搜集MEV相关交易，由于是通过Trace搜集，即使失败的交易可以被捕获到，相比[eigenphi](https://eigenphi.io/)，交易信息会更加全面。

很高兴在 [ETHBeijing](https://www.ethbeijing.xyz/) 上展示我们的项目，我们期待和其他志同道合的伙伴合作。



## 1. 💨 Pioplat

随着区块链上应用变得越来越普遍，出现了各种各样的对延迟敏感的使用场景，`MEV`就是其中之一，发送和接收信息的延迟越低，节点获得收益的机会就越大。为了满足这个需求，我们开发了`Pioplat`，它是一个可行性强、成本低廉的区块链低延迟解决方案，它由一个全节点和位于不同地理位置的多个中继节点组成。我们在[Peri](https://arxiv.org/abs/2205.06837)的基础上，改进了节点选择策略，并且设计了多个中继节点间的低延迟通信协议，可以有效缩短延迟。我们在`bsc`上几乎完整实现了`Pioplat`，代码完全开源以鼓励社区进一步研究。我们在不同大陆的五个中继节点上测试了这个解决方案，结果显示它可以有效地减少了接收区块/交易延迟，非常适用于像`MEV`这样对延迟敏感的使用场景。



### 1.1 基于Geth的低延时客户端

我们修改了`geth`客户端的网络部分，具体来说添加了邻居节点选择算法。节点每隔固定时间为当前的邻居节点依据收取消息的先后顺序打分，剔除掉分数低的节点，连接新的节点。有关更详细的信息，请参阅这个仓库。



### 1.2 仅做消息传递的中继节点

为尽可能早的收到`p2p`网络中信息，一个直观的方法是增加我们的节点，但是受限于全节点巨大的存储需求，运行多个节点的代价十分昂贵。因此我们设计了不保存状态的中继节点，它们每个节点都配备了邻居选择策略，每当有节点发送来查询请求，这些节点便查询上述全节点。此外，我们通过区块和交易缓存机制大大降低对全节点的带宽压力。有关更详细的信息，请参阅这个仓库。



## 2. 🔰 TFSniffer



## 3. 🔍 MEV Scan

**Sandwich Scan**

Sandwich 可以收集三明治攻击相关的交易信息，不仅可以收集成功的三明治攻击交易对，也可以搜集失败的三明治攻击交易对（如因为买入貔貅代币而无法卖出）。

此外本程序还可以检测买入卖出的Token是否收取交易手续费及收取的比例。

